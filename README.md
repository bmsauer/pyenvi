pyenvi
======

Python system environment variable simulator.

By: Brian Sauer

## Overview and purpose:

PyEnvi is a library to give multi process applications an environment variable
like construct.  os.environ[] only works in a single process, and to use true
system level environment variables is sloppy and not cross platform.  PyEnvi is
a pure python library.

##Brief usage:

pyenvi = PyEnvi({"name":"Brian"})           #initialize environment variable "name" to "Brian"

pyenvi.start()                              #must be called to use variables

pyenvi.set("color":"blue")                  #sets new environment variable or updates old one

pyenvi.get("color")                         #returns environment variable

PyEnvi.get_instance()                       #get singleton instance from anywhere in code

PyEnvi.stop()                               #shut down PyEnvi


## Method Description:

    class PyEnvi(object):
        """
        PyEnvi: environment variable simulator to multi process python applications.
        """
        
        _instance = None
        def get_instance():
            """
            Get the singleton instance of PyEnvi.  Creates a new instance if it doesn't exist.
            """
        
        def __init__(self,environment_variables={}):
            """
            Constructor.  Params: dictionary of environment variables.
            Sets singleton instance.  Note that if called twice, will 
            raise exception.
            """
    
        def __str__(self):
            """
            Returns a string of the currently set environment variables
            """
        
        def is_running(self):
            """
            Returns True if PyEnvi is running, False if it isn't.
            """
        
        def start(self):
            """
            Starts PyEnvi so that environment variables can be set and get.  Raises an exception
            if already started.  Registers shutdown code on atexit.
            """
        
        def stop(self):
            """
            Stops PyEnvi, closes subprocess.  Returns "OK" on success, error message on fail.
            """            
                    
        def set(self,key, value):
            """
            Sets a variable.  Params:  string key and value, representing a environment variable.
            PyEnvi must be running, or an exception is raised.
            """
                    
        def get(self,key):
            """
            Gets the value of a variable.  Params: a string key for the variable wanted.
            PyEnvi must be running, or an exception is raised.
            If the variable is not set, an exception is raised.
            """
                    
        def exists(self,key):
            """
            Returns true if a variable is set, false if it isn't. Params:  key to be queried.
            PyEnvi must be running, or an exception is raised.
            """
            
        def parse_response(self,response):
            """
            Converts a byte response into a string, returns said string.  Params: bytes from response.
            """
        
        def create_message(self, action,data):
            """
            Create a message.  Params:  Action for subprocess to process, and data sent.
            """
        
        def send_message(self,message):
            """
            Send a message to the subprocess, and return the response it gives.  Params: message generated by create_message
            """

##Possible Improvements:
- Support for variables over a network
- Variable persistance from start to stop

##TODO / Open Issues:
- Process leak on non-clean exit
- Better tests (see test file)
- Documentation generation
